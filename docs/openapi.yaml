openapi: 3.0.0
info:
  title: TravelAja API
  description: API untuk layanan TravelAja
  version: 1.0.0
servers:
  - url: http://localhost:3000/api/v1
  - url: https://expressjs-develop.up.railway.app/api/v1
paths:
  /register:
    post:
      summary: Register User baru
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "kevin1"
                email:
                  type: string
                  example: "TravelAja@gmail.com"
                no_telp:
                  type: string
                  example: "0811111122"
                password:
                  type: string
                  example: "password123"
      responses:
        "201":
          description: User berhasil terdaftar
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "User telah berhasil terdaftar. Silakan periksa email Anda untuk OTP."
                  data:
                    type: object
                    properties:
                      token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NiwiZW1haWwiOiJtcXNheGFjcEBtdWF0b2MuY29tIiwiaWF0IjoxNzE2NjY2NjMzLCJleHAiOjE3MTY3NTMwMzN9.W3NoC1hAUqzrvw5qBK_caziJRhcY2TEkKsLO5MsMQm4"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Nama, email, no_telp, dan password dibutuhkan!"
                  data:
                    type: string
                    example: null
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Email dan No. Telp telah digunakan!"
                  data:
                    type: string
                    example: null

  /renew-otp:
    post:
      summary: Memperbarui OTP
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: "TravelAja@gmail.com"
      responses:
        "200":
          description: OTP berhasil diperbarui
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "OTP telah berhasil diperbarui. Silakan periksa email Anda untuk OTP yang baru."
                  data:
                    type: string
                    example: null
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Pengguna sudah diverifikasi dan tidak dapat memperbarui OTP"
                  data:
                    type: string
                    example: null
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Email tidak cocok dengan pengguna yang terdaftar"
                  data:
                    type: string
                    example: null
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Token verifikasi tidak valid"
                  data:
                    type: string
                    example: null

  /verify-otp:
    post:
      summary: Memverifikasi OTP
      tags:
        - Auth
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                otp:
                  type: integer
                  example: 114687
      responses:
        "200":
          description: User berhasil diverifikasi
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "User berhasil diverifikasi"
                  data:
                    type: object
                    properties:
                      token:
                        type: string
                        example: null
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "OTP diperlukan!"
                  data:
                    type: string
                    example: null
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "OTP tidak valid atau telah kedaluwarsa!"
                  data:
                    type: string
                    example: null
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false``
                  message:
                    type: string
                    example: "Parameter verifikasi tidak valid"
                  data:
                    type: string
                    example: null

  /login:
    post:
      summary: Login user
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                emailOrNoTelp:
                  type: string
                  example: "TravelAja@gmail.com"
                password:
                  type: string
                  example: "password123"
      responses:
        "200":
          description: Login berhasil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Login berhasil"
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: "Ilham"
                      email:
                        type: string
                        example: "TravelAja@gmail.com"
                      token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJhcGhzMTJAZ21haWwuY29tIiwiaWF0IjoxNzE2Mzk4NTQ4LCJleHAiOjE3MTY0ODQ5NDh9.RWhn7PfFE25eqyUcBmQxPCa1kJELChTcgDj3_CBRMdU"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Email atau No. Telp dan kata sandi diperlukan!"
                  data:
                    type: string
                    example: null
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Password tidak valid!"
                  data:
                    type: string
                    example: null
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Akun Belum terverifikasi, silahkan register ulang!"
                  data:
                    type: string
                    example: null
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Email atau nomor telepon tidak valid!"
                  data:
                    type: string
                    example: null
  /all-user:
    get:
      summary: Mendapatkan semua user
      tags:
        - Auth
      responses:
        "200":
          description: Data pengguna berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Data pengguna berhasil diambil"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          example: "1"
                        name:
                          type: string
                          example: "kevin1"
                        email:
                          type: string
                          example: "TravelAja@gmail.com"
                        no_telp:
                          type: string
                          example: "0811111122"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Terjadi kesalahan saat mengambil data pengguna"
                  data:
                    type: string
                    example: null

  /auth:
    get:
      summary: Autentikasi user
      tags:
        - Auth
      security:
        - bearerAuth: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "OK"
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: "1"
                      email:
                        type: string
                        example: "TravelAja@gmail.com"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Unauthorized"
                  data:
                    type: string
                    example: null
  /forgot-password:
    post:
      summary: lupa password
      tags:
        - "Auth"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: "TravelAja@gmail.com"
                password:
                  type: string
                  example: "password123"
      responses:
        "200":
          description: Sukses kirim tautan ke email
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Sukses kirim Email Forget Password"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Email tidek ditemukan"
        "500":
          description: Internal Server Eror
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "gagal mengirim email"

  /reset-password:
    post:
      summary: reset password
      tags:
        - "Auth"
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                  example: "Password123"
                confirmPassword:
                  type: string
                  example: "Password123"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Berhasil mengatur ulang password pengguna!"
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      email:
                        type: string
                        example: "TravelAja@gmail.com"
                      password:
                        type: string
                        example: password123
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Pengguna tidak ditemukan"
                  data:
                    example: null
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Password dan Konfirmasi password harus diisi"
                  data:
                    example: null

  /google:
    get:
      tags:
        - Auth
      summary: Login/register with google
      description: Creates a new user with the provided information.
      responses:
        "200":
          description: Successful user creation
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Login berhasil"
                  err:
                    type: string
                    nullable: true
                    example: null
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          name:
                            type: string
                            example: "TravelAja"
                          email:
                            type: string
                            example: "TravelAja@gmail.com"
                          password:
                            type: string
                            nullable: true
                            example: null
                          google_id:
                            type: string
                            example: "10113939153987jkxbcd8282"
                      token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJhcGhzMTJAZ21haWwuY29tIiwiaWF0IjoxNzE2Mzk4NTQ4LCJleHAiOjE3MTY0ODQ5NDh9.RWhn7PfFE25eqyUhhjBmQxPCa1kJELChTcgDj3_CBRMdU"

  /profile:
    get:
      summary: mengambil profile
      tags:
        - Profile
      security:
        - bearerAuth: []
      responses:
        "200":
          description: User data retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "User data retrieved successfully"
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: "1"
                      name:
                        type: string
                        example: "tesss"
                      no_telp:
                        type: string
                        example: "0811111122"
                      avatar_url:
                        type: string
                        example: "https://ik.imagekit.io/travelaja/contoh.png"
        "400":
          description: User tidak ditemukan!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "User tidak ditemukan!"
                  data:
                    type: string
                    example: null

  /updateprofile:
    post:
      summary: mengupdate profile
      tags:
        - Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "kevin1"
                no_telp:
                  type: string
                  example: "0811111122"
                password:
                  type: string
                  example: "password123"
      responses:
        "200":
          description: User profile berhasil diupdate!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "User profile berhasil diupdate!"
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: "1"
                      name:
                        type: string
                        example: "tesss"
                      no_telp:
                        type: string
                        example: "0811111122"
                      avatar_url:
                        type: string
                        example: "https://ik.imagekit.io/travelaja/contoh.png"
        "401":
          description: User tidak ditemukan!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "User tidak ditemukan!"
                  data:
                    type: string
                    example: null
        "422":
          description: field nama, no_telp dan password dibutuhkan!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "field nama, no_telp dan password dibutuhkan!"
                  data:
                    type: string
                    example: null
        "400":
          description: No. Telp telah digunakan!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "No. Telp telah digunakan!"
                  data:
                    type: string
                    example: null
  /uploadavatar:
    post:
      summary: mengupload avatar
      tags:
        - Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "200":
          description: file berhasil diunggah!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "file berhasil diunggah!"
                  data:
                    type: object
                    properties:
                      avatar_url:
                        type: string
                        example: "https://ik.imagekit.io/travelaja/contoh.png"
        "400":
          description: file tidak ada!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "file tidak ada!"
                  data:
                    type: string
                    example: null
  /change-password:
    put:
      summary: mengupdate password
      tags:
        - Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                oldPassword:
                  type: string
                  example: "oldpassword123"
                newPassword:
                  type: string
                  example: "newpassword123"
      responses:
        "200":
          description: password berhasil diupdate!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Password berhasil diubah!"
                  data:
                    example: null
        "400":
          description: Request yang tidak valid karena field yang dibutuhkan tidak ada
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Field dibutuhkan!"
                  data:
                    example: null
        "401":
          description: Otentikasi gagal karena password lama tidak sesuai.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Password lama tidak sesuai!"
                  data:
                    example: null
  /promotion:
    post:
      summary: membuat promosi
      tags:
        - Promotion
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                discount:
                  type: integer
                  example: 20
                startDate:
                  type: string
                  example: "2024-06-01T14:00:00.000Z"
                endDate:
                  type: string
                  example: "2024-06-02T14:00:00.000Z"
      responses:
        "201":
          description: Promosi berhasil dibuat
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Promosi berhasil dibuat"
                  data:
                    type: object
                    properties:
                      promotion_id:
                        type: integer
                        example: 1
                      discount:
                        type: integer
                        example: 20
                      startDate:
                        type: string
                        example: "2024-06-01T14:00:00.000Z"
                      endDate:
                        type: string
                        example: "2024-06-02T14:00:00.000Z"
    get:
      summary: mengambil data promosi
      tags:
        - Admin
      security:
        - bearerAuth: []

      responses:
        "200":
          description: Data Promosi berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Data Promosi berhasil diambil"
                  data:
                    type: object
                    properties:
                      promotion_id:
                        type: integer
                        example: 1
                      discount:
                        type: integer
                        example: 20
                      startDate:
                        type: string
                        example: "2024-06-01T14:00:00.000Z"
                      endDate:
                        type: string
                        example: "2024-06-02T14:00:00.000Z"
  /airport:
    get:
      tags:
        - Admin
      summary: Get all airports
      description: Retrieve a list of all airports
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search query to filter airports by name or city
      responses:
        200:
          description: A list of airports
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil menampilkan semua bandara
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        airport_id:
                          type: string
                          example: LOP
                        airport_name:
                          type: string
                          example: Lombok Praya International Airport
                        continent:
                          type: string
                          example: Asia
                        country:
                          type: string
                          example: Indonesia
                        city:
                          type: string
                          example: Jakarta
    post:
      tags:
        - Admin
      summary: Create a new airport
      description: Add a new airport to the database
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                airport_id:
                  type: string
                  example: LOP
                airport_name:
                  type: string
                  example: Lombok Praya International Airport
                continent:
                  type: string
                  example: Asia
                country:
                  type: string
                  example: Indonesia
                city:
                  type: string
                  example: Jakarta
      responses:
        201:
          description: Airport created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Pembuatan bandara berhasil
                  data:
                    type: object
                    properties:
                      airport_id:
                        type: string
                        example: LOP
                      airport_name:
                        type: string
                        example: Lombok Praya International Airport
                      continent:
                        type: string
                        example: Asia
                      country:
                        type: string
                        example: Indonesia
                      city:
                        type: string
                        example: Lombok
        400:
          description: Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Harap menyediakan airport_id, nama bandara, benua, negara, dan kota
                  data:
                    type: string
                    example: null
        409:
          description: Airport already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Airport dengan ID ini sudah ada
                  data:
                    type: string
                    example: null

  /airport/{airportId}:
    get:
      tags:
        - Admin
      summary: Get airport by ID
      description: Retrieve details of a specific airport by its ID
      parameters:
        - in: path
          name: airportId
          required: true
          schema:
            type: string
          description: The airportId of the airport to retrieve
      responses:
        200:
          description: Details of the specified airport
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil menampilkan bandara
                  data:
                    type: object
                    properties:
                      airport_id:
                        type: string
                        example: LOP
                      airport_name:
                        type: string
                        example: Lombok Praya International Airport
                      continent:
                        type: string
                        example: Asia
                      country:
                        type: string
                        example: Indonesia
                      city:
                        type: string
                        example: Jakarta
        404:
          description: Airport not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Bandara tidak ditemukan
                  data:
                    type: string
                    example: null
    put:
      tags:
        - Admin
      summary: Edit airport by ID
      description: Update the details of a specific airport by its ID
      parameters:
        - in: path
          name: airportId
          required: true
          schema:
            type: string
          description: The ID of the airport to update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                airport_name:
                  type: string
                  example: Yogyakarta International Airport
                continent:
                  type: string
                  example: Asia
                country:
                  type: string
                  example: Indonesia
                city:
                  type: string
                  example: Yogyakarta
      responses:
        200:
          description: Airport updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Pembaharuan bandara berhasil
                  data:
                    type: object
                    properties:
                      airportId:
                        type: string
                        example: YIA
                  airport_name:
                    type: string
                    example: Yogyakarta International Airport
                  continent:
                    type: string
                    example: Asia
                  country:
                    type: string
                    example: Indonesia
                  city:
                    type: string
                    example: Yogyakarta
        400:
          description: Missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Harap menyediakan nama bandara, benua, negara, dan kota
                  data:
                    type: string
                    example: null
        404:
          description: Airport not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Bandara tidak ditemukan
                  data:
                    type: string
                    example: null

    delete:
      tags:
        - Admin
      summary: Delete airport by ID
      description: Remove a specific airport by its ID from the database
      parameters:
        - in: path
          name: airportId
          required: true
          schema:
            type: string
          description: The ID of the airport to delete
      responses:
        200:
          description: Airport deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Penghapusan bandara berhasil
                  data:
                    type: string
                    example: null
        404:
          description: Airport not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Bandara tidak ditemukan
                  data:
                    type: string
                    example: null

  /flights:
    get:
      summary: Mengambil semua data penerbangan
      tags:
        - Flights
      description: Get all available flights || jika promotion null maka object promotion null
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Data penerbangan berhasil diambil
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        flight_id:
                          type: string
                          example: GA0000001
                        price:
                          type: number
                          example: 1000000
                        total_price:
                          type: number
                          example: 1000000
                        date:
                          type: string
                          format: date-time
                          example: "2024-06-05T00:00:00.000Z"
                        departure_time:
                          type: string
                          format: date-time
                          example: "2024-06-05T14:00:00.000Z"
                        arrival_time:
                          type: string
                          format: date-time
                          example: "2024-06-05T18:00:00.000Z"
                        airline_id:
                          type: string
                          example: QG
                        arrival_airport_id:
                          type: string
                          example: CGK
                        destination_airport_id:
                          type: string
                          example: LOP
                        promotion_id:
                          type: integer
                          nullable: true
                          example: null
                        seat_class_id:
                          type: integer
                          example: 2
                        airlines:
                          type: object
                          properties:
                            airline_id:
                              type: string
                              example: QG
                            airline_name:
                              type: string
                              example: Citilink
                            baggage:
                              type: string
                              example: "30"
                            cabin_baggage:
                              type: string
                              example: "7"
                            url_logo:
                              type: string
                              example: "https://ik.imagekit.io/travelaja/1717591564516_W7yo6KA-B.jpg"
                        arrival_airport:
                          type: object
                          properties:
                            id:
                              type: string
                              example: CGK
                            airport_name:
                              type: string
                              example: Soekarno Hatta International Airport
                            continent:
                              type: string
                              example: Asia
                            country:
                              type: string
                              example: Indonesia
                            city:
                              type: string
                              example: Jakarta
                        destination_airport:
                          type: object
                          properties:
                            id:
                              type: string
                              example: LOP
                            airport_name:
                              type: string
                              example: Lombok Praya International Airport
                            continent:
                              type: string
                              example: Asia
                            country:
                              type: string
                              example: Indonesia
                            city:
                              type: string
                              example: Lombok
                        promotion:
                          type: object
                          properties:
                            promotion_id:
                              type: integer
                              example: 1
                            discount:
                              type: string
                              example: 20
                            startDate:
                              format: date-time
                              example: "2024-06-05T00:00:00.000Z"
                            endDate:
                              format: date-time
                              example: "2024-06-05T00:00:00.000Z"
    post:
      summary: Membuat penerbangan baru
      tags:
        - Flights
      description: Endpoint ini digunakan untuk membuat penerbangan baru. || jika promotion null maka object promotion null || jika promotion null maka object promotion_id bisa dihapus
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                flight_id:
                  type: string
                  example: "GA0000002"
                  description: ID penerbangan yang unik.
                price:
                  type: number
                  example: 1000000.00
                  description: Harga tiket penerbangan.
                date:
                  type: string
                  format: date
                  example: "2024-06-05"
                departure_time:
                  type: string
                  format: date-time
                  example: "2024-06-05T14:00:00.000Z"
                arrival_time:
                  type: string
                  format: date-time
                  example: "2024-06-05T18:00:00.000Z"
                airline_id:
                  type: string
                  example: "QG"
                  description: ID maskapai penerbangan.
                arrival_airport_id:
                  type: string
                  example: "CGK"
                  description: ID bandara kedatangan.
                destination_airport_id:
                  type: string
                  example: "LOP"
                  description: ID bandara tujuan.
                seat_class_id:
                  type: integer
                  example: 1
                  description: ID kelas kursi.
                promotion_id:
                  type: integer
                  nullable: true
                  example: 1
                  description: ID promosi (opsional).
      responses:
        "201":
          description: Penerbangan berhasil dibuat
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Penerbangan berhasil dibuat
                  data:
                    type: object
                    properties:
                      flight_id:
                        type: string
                        example: GA0000002
                      price:
                        type: number
                        example: 1000000.00
                      total_price:
                        type: number
                        example: 1000000.00
                      date:
                        type: string
                        format: date
                        example: "2024-06-05"
                      departure_time:
                        type: string
                        format: date-time
                        example: "2024-06-05T14:00:00.000Z"
                      arrival_time:
                        type: string
                        format: date-time
                        example: "2024-06-05T18:00:00.000Z"
                      airline_id:
                        type: string
                        example: QG
                      arrival_airport_id:
                        type: string
                        example: CGK
                      destination_airport_id:
                        type: string
                        example: LOP
                      promotion_id:
                        type: integer
                        nullable: true
                        example: 1
                      seat_class_id:
                        type: integer
                        example: 1

        "400":
          description: Permintaan tidak valid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Airline tidak ditemukan"
                  data:
                    type: boolean
                    example: null

        "409":
          description: Kode penerbangan sudah ada, silahkan coba yang lain!
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Kode penerbangan sudah ada, silahkan coba yang lain!"
                  data:
                    type: boolean
                    example: null
        "404":
          description: Penerbangan Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Penerbangan tidak ditemukan"
                  data:
                    type: string
                    example: null
  /flights/{id}:
    get:
      summary: mengambil data penerbangan berdasarkan parameter id
      tags:
        - Flights
      parameters:
        - name: id
          in: path
          required: true
          description: ID Flights
          example: GA0000002
          schema:
            type: string
      responses:
        "200":
          description: Data penerbangan berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Data penerbangan berhasil diambil"
                  data:
                    type: object
                    properties:
                      flight_id:
                        type: string
                        example: "GA0000001"
                      price:
                        type: integer
                        example: 1000000
                      total_price:
                        type: integer
                        example: 1000000
                      date:
                        type: string
                        example: "2024-06-05T00:00:00.000Z"
                      departure_time:
                        type: string
                        example: "2024-06-05T14:00:00.000Z"
                      arrival_time:
                        type: string
                        example: "2024-06-05T14:00:00.000Z"
                      airline_id:
                        type: string
                        example: "QG"
                      arrival_airport_id:
                        type: string
                        example: "CGK"
                      destination_airport_id:
                        type: string
                        example: "LOP"
                      promotion_id:
                        type: string
                        example: null
                      seat_class_id:
                        type: integer
                        example: 1
                      airlines:
                        properties:
                          airline_id:
                            type: string
                            example: "QG"
                          airline_name:
                            type: string
                            example: "Citilink"
                          baggage:
                            type: string
                            example: "30"
                          cabin_baggage:
                            type: string
                            example: "7"
                          url_logo:
                            type: string
                            example: "https://ik.imagekit.io/travelaja/1717435283202_VBY4c9eNr.png"
                      arrival_airport:
                        properties:
                          id:
                            type: string
                            example: "CGK"
                          airport_name:
                            type: string
                            example: "Soekarno Hatta International Airport"
                          continent:
                            type: string
                            example: "Asia"
                          country:
                            type: string
                            example: "Indonesia"
                          city:
                            type: string
                            example: "Jakarta"
                      destination_airport:
                        properties:
                          id:
                            type: string
                            example: "LOP"
                          airport_name:
                            type: string
                            example: "Lombok Praya International Airport"
                          continent:
                            type: string
                            example: "Asia"
                          country:
                            type: string
                            example: "Indonesia"
                          city:
                            type: string
                            example: "Lombok"
                      promotion:
                        type: string
                        example: null
  /search:
    get:
      summary: Mengambil semua data penerbangan berdasarkan pencarian
      tags:
        - Flights
      description: Mengambil semua penerbangan yang tersedia berdasarkan kriteria pencarian yang diberikan.
      parameters:
        - name: arrival_airport_id
          in: query
          required: true
          description: Kode bandara kedatangan
          schema:
            type: string
            example: CGK
        - name: destination_airport_id
          in: query
          required: true
          description: Kode bandara tujuan
          schema:
            type: string
            example: LOP
        - name: date
          in: query
          required: true
          description: Tanggal keberangkatan
          schema:
            type: string
            format: date
            example: 2024-06-05
        - name: seat_class_type
          in: query
          required: true
          description: Nama kelas maskapai
          schema:
            type: string
            example: economy
      responses:
        "200":
          description: Operasi berhasil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Data penerbangan berhasil diambil
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        flight_id:
                          type: string
                          example: GA0000001
                        price:
                          type: number
                          example: 1000000
                        total_price:
                          type: number
                          example: 1000000
                        date:
                          type: string
                          format: date-time
                          example: "2024-06-05T00:00:00.000Z"
                        departure_time:
                          type: string
                          format: date-time
                          example: "2024-06-05T14:00:00.000Z"
                        arrival_time:
                          type: string
                          format: date-time
                          example: "2024-06-05T18:00:00.000Z"
                        airline_id:
                          type: string
                          example: QG
                        arrival_airport_id:
                          type: string
                          example: CGK
                        destination_airport_id:
                          type: string
                          example: LOP
                        promotion_id:
                          type: integer
                          nullable: true
                          example: null
                        seat_class_id:
                          type: integer
                          example: 2
                        airlines:
                          type: object
                          properties:
                            airline_id:
                              type: string
                              example: QG
                            airline_name:
                              type: string
                              example: Citilink
                            baggage:
                              type: string
                              example: "30"
                            cabin_baggage:
                              type: string
                              example: "7"
                            url_logo:
                              type: string
                              example: "https://ik.imagekit.io/travelaja/1717591564516_W7yo6KA-B.jpg"
                        arrival_airport:
                          type: object
                          properties:
                            id:
                              type: string
                              example: CGK
                            airport_name:
                              type: string
                              example: Soekarno Hatta International Airport
                            continent:
                              type: string
                              example: Asia
                            country:
                              type: string
                              example: Indonesia
                            city:
                              type: string
                              example: Jakarta
                        destination_airport:
                          type: object
                          properties:
                            id:
                              type: string
                              example: LOP
                            airport_name:
                              type: string
                              example: Lombok Praya International Airport
                            continent:
                              type: string
                              example: Asia
                            country:
                              type: string
                              example: Indonesia
                            city:
                              type: string
                              example: Lombok
                        promotion:
                          type: object
                          properties:
                            promotion_id:
                              type: integer
                              example: 1
                            discount:
                              type: string
                              example: 20%
                            startDate:
                              type: string
                              format: date-time
                              example: "2024-06-05T00:00:00.000Z"
                            endDate:
                              type: string
                              format: date-time
                              example: "2024-06-05T00:00:00.000Z"
        "404":
          description: Penerbangan tidak ditemukan
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Penerbangan tidak ditemukan
                  data:
                    type: string
                    example: null
  /passenger:
    post:
      summary: membuat data penumpang
      security:
        - bearerAuth: []
      tags:
        - Passenger
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fullname:
                  type: string
                  example: "travelajaa"
                passenger_type:
                  type: string
                  example: "adult"
                born_date:
                  type: string
                  example: "1985-05-16"
                citizen:
                  type: string
                  example: "USA"
                identity_number:
                  type: string
                  example: "A123456789"
                booking_id:
                  type: integer
                  example: 4
      responses:
        "201":
          description: Penumpang berhasil dibuat
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Penumpang berhasil dibuat"
                  data:
                    type: object
                    properties:
                      passenger_id:
                        type: integer
                        example: 3
                      fullname:
                        type: string
                        example: "Rayeang 2"
                      passenger_type:
                        type: string
                        example: "adult"
                      born_date:
                        type: string
                        example: "1985-05-16T00:00:00.000Z"
                      citizen:
                        type: string
                        example: "USA"
                      identity_number:
                        type: string
                        example: "A123456789"
                      booking_id:
                        type: integer
                        example: 1
                      booking:
                        type: object
                        properties:
                          booking_id:
                            type: integer
                            example: 1
                          booking_code:
                            type: string
                            example: "TVLAJA-000001"
                          booking_date:
                            type: string
                            format: date-time
                            example: "2024-06-05T13:46:01.106Z"
                          isPaid:
                            type: boolean
                            example: false
                          user_id:
                            type: integer
                            example: 2
                          flight_id:
                            type: string
                            example: "GA0000001"
                          payment_id:
                            type: string
                            example: null
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Kode pemesanan tidak valid!"
                  data:
                    type: string
                    example: null
  /passenger-token:
    get:
      summary: Menampilkan data penumpang berdasarkan token pengguna
      security:
        - bearerAuth: []
      tags:
        - Passenger
      responses:
        "200":
          description: Data penumpang berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Data pemesanan berhasil diambil"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        passenger_id:
                          type: integer
                          example: 5
                        fullname:
                          type: string
                          example: "Rayeang 2"
                        passenger_type:
                          type: string
                          example: "adult"
                        born_date:
                          type: string
                          format: date-time
                          example: "2003-05-15T00:00:00.000Z"
                        citizen:
                          type: string
                          example: "IDN"
                        identity_number:
                          type: string
                          example: "A1234567893"
                        booking_id:
                          type: integer
                          example: 4
                        booking:
                          type: object
                          properties:
                            booking_id:
                              type: integer
                              example: 4
                            booking_code:
                              type: string
                              example: "TVLAJA-000002"
                            booking_date:
                              type: string
                              format: date-time
                              example: "2024-06-10T14:26:14.815Z"
                            user_id:
                              type: integer
                              example: 6
                            flight_id:
                              type: string
                              example: "GA0000002"
                            payment_id:
                              type: integer
                              nullable: true
                              example: null
                            snap_token:
                              type: string
                              nullable: true
                              example: null
                            snap_redirect_url:
                              type: string
                              nullable: true
                              example: null
  /booking:
    post:
      summary: Membuat data pemesanan
      security:
        - bearerAuth: []
      tags:
        - Booking
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                flight_id:
                  type: string
                  example: "GA0000002"
      responses:
        "201":
          description: Pemesanan berhasil dibuat
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Pemesanan dibuat"
                  data:
                    type: object
                    properties:
                      booking_id:
                        type: integer
                        example: 8
                      booking_code:
                        type: string
                        example: "TVLAJA-000005"
                      booking_date:
                        type: string
                        format: date-time
                        example: "2024-06-10T15:55:00.746Z"
                      user_id:
                        type: integer
                        example: 6
                      flight_id:
                        type: string
                        example: "GA0000002"
                      payment_id:
                        type: string
                        example: null
                      snap_token:
                        type: string
                        example: null
                      snap_redirect_url:
                        type: string
                        example: null
        "400":
          description: Permintaan tidak valid
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "field dibutuhkan !"
                  data:
                    example: null

  /mybooking:
    get:
      summary: mengambil data booking berdasarkan token
      tags:
        - Booking
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Data pemesanan berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Data pemesanan berhasil diambil"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        booking_id:
                          type: integer
                          example: 1
                        booking_code:
                          type: string
                          example: "TVLAJA-000001"
                        booking_date:
                          type: string
                          format: date-time
                          example: "2024-06-05T13:46:01.106Z"
                        isPaid:
                          type: boolean
                          example: false
                        user_id:
                          type: integer
                          example: 2
                        flight_id:
                          type: string
                          example: "GA0000001"
                        payment_id:
                          type: string
                          example: null
  /booking/{id}:
    get:
      summary: mengambil data booking berdasarkan id dan detail riwayat pemesanan
      tags:
        - Booking
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Kode booking
      responses:
        "200":
          description: Data pemesanan berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Data pemesanan berhasil diambil"
                  data:
                    type: object
                    properties:
                      booking_id:
                        type: integer
                        example: 2
                      booking_code:
                        type: string
                        example: "TVLAJA-000002"
                      booking_date:
                        type: string
                        format: date-time
                        example: "2024-06-05T14:05:01.509Z"
                      isPaid:
                        type: boolean
                        example: false
                      user_id:
                        type: integer
                        example: 2
                      flight_id:
                        type: string
                        example: "GA0000001"
                      payment_id:
                        type: string
                        example: null

  /notification:
    get:
      summary: Ambil semua notifikasi
      description: Mengambil semua notifikasi.
      tags:
        - Notification
      responses:
        "200":
          description: Notifikasi berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Notifikasi berhasil diambil"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        message:
                          type: string
                          example: Hi! Ilham Akun Anda telah berhasil dibuat
                        isRead:
                          type: boolean
                          example: false
                        user_id:
                          type: integer
                          example: 1
  /notification-user:
    get:
      summary: Ambil notifikasi untuk pengguna tertentu
      description: Mengambil notifikasi untuk pengguna yang terautentikasi dan menandainya sebagai telah dibaca.
      tags:
        - Notification
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Notifikasi berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Notifikasi berhasil diambil"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        message:
                          type: string
                          example: Hi! Ilham Akun Anda telah berhasil dibuat
                        isRead:
                          type: boolean
                          example: false
                        user_id:
                          type: integer
                          example: 1
  /seat/{id}:
    get:
      summary: Mengambil data kursi kosong berdasarkan kelas kursi
      tags:
        - Seat
      parameters:
        - name: id
          in: path
          required: true
          description: ID kelas kursi
          schema:
            type: string
      responses:
        "200":
          description: Data kursi kosong berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Data kursi kosong berhasil diambil"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        seat_id:
                          type: integer
                          example: 1
                        seat_number:
                          type: integer
                          example: 1
                        status:
                          type: string
                          example: "AVAILABLE"
                        seat_class_id:
                          type: integer
                          example: 2
  /seat:
    post:
      summary: Membuat kursi berdasarkan kelas kursi
      tags:
        - Seat
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                seat_class_id:
                  type: integer
                  description: ID kelas kursi untuk membuat kursi
                  example: 1
      responses:
        "201":
          description: Kursi berhasil dibuat
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Kursi berhasil dibuat"
                  data:
                    example: null
        "400":
          description: Permintaan tidak valid
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "field dibutuhkan !"
                  data:
                    example: null

  /seatclasses:
    post:
      tags:
        - SeatClass
      summary: Create a new seat class
      description: Create a new seat class with the provided details
      requestBody:
        description: Details of the seat class to be created
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                seat_class_type:
                  type: string
                  example: Economy
                seat_amount:
                  type: integer
                  example: 60
                airlines_id:
                  type: string
                  example: QG
      responses:
        201:
          description: Seat class created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Kelas kursi berhasil dibuat
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: 1
                      seat_class_type:
                        type: string
                        example: Economy
                      seat_amount:
                        type: integer
                        example: 60
                      airlines_id:
                        type: string
                        example: QG
        400:
          description: Bad request due to missing or invalid fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: field dibutuhkan !
                  data:
                    type: string
                    example: null
        404:
          description: Airline not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: airlines_id tidak ditemukan
    get:
      summary: Mengambil data kelas kursi
      tags:
        - SeatClass
      responses:
        "200":
          description: Data kelas kursi berhasil diambil
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Data kelas kursi berhasil diambil"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        seat_class_id:
                          type: integer
                          description: ID unik untuk kelas kursi
                          example: 1
                        seat_class_type:
                          type: string
                          description: Jenis atau tipe kelas kursi
                          example: "Economy"
                        seat_amount:
                          type: integer
                          description: Jumlah kursi dalam kelas kursi ini
                          example: 60
                        airlines_id:
                          type: string
                          description: ID maskapai yang memiliki kelas kursi ini
                          example: "QG"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    BasicResponse:
      title: BasicResponse
      type: object
      properties:
        status:
          type: boolean
          example: true
        message:
          type: string
          example: "success"
